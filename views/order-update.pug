extends base

block content
    main.col-md-9.ml-sm-auto.col-lg-10.px-md-4(role='main')
        // FORM
        .container
            .row.jumbotron
                .col-md-4.order-md-2.mb-4
                    h4.d-flex.justify-content-between.align-items-center.mb-3
                        span.text-muted= order.customer.name
                        //- span.numOfItems.badge.badge-secondary.badge-pill
                    ul.list-group.mb-3
                        .cartItemsContainer
                            each product in order.products
                                li.list-group-item.d-flex.justify-content-between.lh-condensed
                                    div
                                        h6.my-0= `${product.type.title} x${product.orderQuantity}`
                                        //- small.text-muted Brief description
                                    span.text-muted= `GHS ${product.purchasePrice || product.type.price}`
                        .deliveryFeeContainer
                            li.list-group-item.d-flex.justify-content-between.lh-condensed
                                    div
                                        h6.my-0 Delivery Fee
                                        //- small.text-muted Brief description
                                    span.text-muted= `GHS ${order.deliveryFee}`
                        .discountContainer
                            li.list-group-item.d-flex.justify-content-between.bg-light
                                .text-success
                                    h6.my-0 Discount
                                    //- small EXAMPLECODE
                                span.text-success= `GHS ${order.discount}`
                        .debtContainer
                            li.list-group-item.d-flex.justify-content-between.bg-light
                                .text-danger
                                    h6.my-0 Amount Owed
                                    //- small EXAMPLECODE
                                span.text-danger= `GHS ${order.totalAmount - order.amountPaid}`
                        li.list-group-item.d-flex.justify-content-between
                            span Total (GHS)
                            strong.cartTotal= `GHS ${order.totalAmount}`
                .col-md-8.order-md-1
                    a.btn.btn-sm.btn-danger(href=`/admin/orders/${order.id}/refund`) Refund 
                    h4.mb-3= `ORDER ${order.orderNum} -- ${order.type}`
                    p.text-muted= `Sold by ${order.user.name} on ${order.date}`

                    - if(order.type === 'credit')
                        form.orderUpdateForm.needs-validation(novalidate='' data-order=order.id data-amount-owed=`${order.totalAmount - order.amountPaid}` data-customer=order.customer.id data-total-order-paid=order.amountPaid data-customer-debt=order.customer.amountOwed)
                            .mb-3
                                label(for='payment') Add A Payment
                                .input-group
                                    input#payment.form-control(type='number' placeholder='0' required='' min=`0` max=`${order.totalAmount - order.amountPaid}`)
                                    .invalid-feedback(style='width: 100%;')
                                        | A Category Name is Required.
                            button.btn.btn-primary.btn-lg.btn-block(type='submit') Save
